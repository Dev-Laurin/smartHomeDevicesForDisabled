{% extends "layout.html" %}
{% block main %}
<div class="container">
	<br> 
	<div class="row">
		<h1>Choose Device Input(s)</h1>
	</div> 
	<br> 
	{% for category in categories %}
	<form action="/showDevices" method="post">
		<div class="form-check-inline">
		  <input class="form-check-input" type="checkbox" value="{{category}}" name="inputCat[]" id="{{category}}">
		  <label class="form-check-label" for="{{category}}">
		    {{category}}
		  </label>
		</div>
	{% endfor %}
		<br> 
		<br> 
		<div class="row">
			<div class="col"> 
				<h2>Choose a category below</h2> 
			</div> 
		</div> 
		<!-- To send the homecategory chosen --> 
		<input style="display: none;" name="homecategory" id='homecategory'/> 
		{% set index = namespace(foo=0) %}
		{% set rows = (homecategories|length)//3 + 1 %}
		{% for row in range(rows) %}
		<div class="row"> 
			{% for col in range(3) %}
			{% if homecategories[index.foo] %}
		    <div class="col">
	    		{% for category in categories %}
				<input style="display: none;" type="checkbox" value="{{category}}" name="inputCat[]" id="{{category}}">
				{% endfor %}
				<a href="#" id='submit' onclick="beforeSubmit('{{homecategories[index.foo].name}}')" type="submit" class="custom-card">
					<div class="card" style="width: 18rem;">
					  <!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
					  <svg class="bd-placeholder-img card-img-top" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: Image"><title>Placeholder</title><rect width="100%" height="100%" fill="#868e96"></rect><text x="50%" y="50%" fill="#dee2e6" dy=".3em">Image</text></svg>
					  <div class="card-img-overlay align-middle">
					    <center><h5 class="card-title align-middle text-light">{{homecategories[index.foo].name}}</h5></center>
					  </div>
					</div>
				</a></form> 
		    </div>
		    {% set index.foo = index.foo + 1 %}
		    {% endif %}
		    {% endfor %}
		</div>
		{% endfor %}
	</form>
</div>
<script>
	function beforeSubmit(val){
		//Change the input value to be what the user chose 
		var input = document.getElementById('homecategory')
		input.value = val
		$('#submit').closest('form').submit()
	}
</script>

{% endblock %}
